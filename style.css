:root {
    --blue: #2563eb;
    --bg: #f8fafc;
    --panel: #ffffff;
    --text: #0f172a;
    --border: #e2e8f0;
    --active: #000000;
}

body.dark-mode {
    --bg: #0f172a;
    --panel: #1e293b;
    --text: #f8fafc;
    --border: #334155;
    --active: #ffffff;
}

body { font-family: 'Inter', system-ui, sans-serif; margin: 0; background: var(--bg); color: var(--text); transition: background 0.3s; }
.no-print { display: block; }
.print-only { display: none; }

/* Navigation */
nav { background: #000; color: #fff; display: flex; align-items: center; padding: 0 20px; height: 60px; justify-content: space-between; position: sticky; top: 0; z-index: 1000; }
.nav-left { display: flex; align-items: center; gap: 20px; }
#theme-toggle { background: none; border: 1px solid #444; color: white; cursor: pointer; border-radius: 50%; width: 32px; height: 32px; }
.tabs button { background: none; border: none; color: #94a3b8; cursor: pointer; padding: 15px 10px; font-weight: 600; font-size: 0.85rem; border-bottom: 3px solid transparent; }
.tabs button.active-tab { color: #fff; border-bottom-color: var(--blue); }
.finish-btn { background: var(--blue) !important; color: white !important; border-radius: 4px; margin-left: 10px; border: none !important; }

/* Toolbar & Highlighting */
.toolbar { background: var(--panel); padding: 10px 20px; border-bottom: 1px solid var(--border); display: flex; gap: 8px; position: sticky; top: 60px; z-index: 999; }
.toolbar button { border: 1px solid var(--border); background: var(--panel); color: var(--text); padding: 8px 12px; cursor: pointer; border-radius: 6px; font-weight: bold; }
.toolbar button.active { background: var(--active) !important; color: var(--bg) !important; border-color: var(--active) !important; }
.sep { color: var(--border); margin: 0 5px; }

/* Main UI */
main { max-width: 1100px; margin: 20px auto; background: var(--panel); padding: 40px; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1); min-height: 80vh; }
.grid-form { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
.input-wrap label { display: block; font-size: 0.75rem; font-weight: bold; margin-bottom: 5px; color: #64748b; }
.input-wrap input { width: 100%; padding: 10px; border: 1px solid var(--border); border-radius: 6px; background: var(--bg); color: var(--text); }

/* Manuscript Sidebar */
.ms-layout { display: flex; gap: 30px; margin-top: 20px; }
.side-nav { width: 220px; border-right: 1px solid var(--border); padding-right: 20px; }
.ch-item { padding: 10px; margin-bottom: 5px; border-radius: 6px; cursor: pointer; font-size: 0.9rem; border: 1px solid transparent; }
.ch-item.active { background: var(--active) !important; color: var(--bg) !important; }
.add-btn { width: 100%; padding: 10px; border: 1px dashed var(--border); background: none; color: var(--text); cursor: pointer; border-radius: 6px; }

/* Editor */
.editor { border: 1px solid var(--border); padding: 40px; min-height: 400px; font-family: "Georgia", serif; line-height: 1.6; outline: none; text-align: justify; background: #fff; color: #000; } /* Manuscript stays paper-like */
body.dark-mode .editor { background: #fdfdfd; } /* Slightly off-white for eye comfort in dark mode */
.title-input { background: none; border: none; color: var(--text); font-size: 2rem; font-weight: bold; width: 100%; font-family: serif; outline: none; }
blockquote { border-left: 4px solid var(--blue); background: #f1f5f9; padding: 15px; font-style: italic; margin: 20px 0; color: #334155; }

/* Project Grid */
.project-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 20px; margin-top: 30px; }
.project-card { border: 2px solid var(--border); padding: 20px; border-radius: 12px; background: var(--bg); cursor: pointer; transition: 0.2s; position: relative; }
.project-card.active { border-color: var(--blue); box-shadow: 0 0 0 2px var(--blue); }

/* Cover Spread */
.cover-canvas { display: flex; background: #1e293b; margin: 30px auto; border: 2px solid #000; width: fit-content; }
.pane { width: 300px; height: 450px; padding: 20px; box-sizing: border-box; color: #fff; }
.pane-spine { width: 20px; writing-mode: vertical-rl; text-align: center; border-left: 1px solid rgba(255,255,255,0.1); border-right: 1px solid rgba(255,255,255,0.1); color: #fff; display: flex; align-items: center; justify-content: center; font-size: 0.7rem; }
.pane textarea { width: 100%; height: 100%; background: none; border: 1px dashed #444; color: #fff; resize: none; padding: 10px; }

/* Export Buttons */
.export-card { background: var(--bg); border: 2px solid var(--border); padding: 30px; border-radius: 12px; cursor: pointer; text-align: left; }
.export-card:hover { border-color: var(--blue); }

@media print {
    .no-print { display: none !important; }
    .print-only { display: block !important; }
    @page { size: 6in 9in; margin: 0; }
    .page { width: 6in; height: 9in; padding: 0.75in 0.75in 0.75in 0.875in; box-sizing: border-box; page-break-after: always; font-family: "Georgia", serif; text-align: justify; font-size: 11.5pt; color: #000; background: #fff; }
    .page:nth-child(even) { padding: 0.75in 0.875in 0.75in 0.75in; }
    .centered-content { display: flex; flex-direction: column; justify-content: center; height: 100%; text-align: center; }
}

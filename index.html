<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KDP-PRO Omniscient Edition</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
</head>
<body class="light-mode">

<nav class="no-print">
    <div class="nav-top">
        <div class="logo">KDP-PRO OMNISCIENT</div>
        <button id="theme-toggle" onclick="toggleTheme()">üåì</button>
    </div>
    <div class="tabs">
        <button id="btn-tab-projects" onclick="showTab('projects')">üìÅ Library</button>
        <button id="btn-tab-details" onclick="showTab('details')">1. Details</button>
        <button id="btn-tab-content" onclick="showTab('content')">2. Content</button>
        <button id="btn-tab-cover" onclick="showTab('cover')">3. Cover</button>
        <button id="btn-tab-rights" onclick="showTab('rights')">4. Rights</button>
        <button id="btn-tab-export" onclick="showTab('export')">üöÄ Export</button>
    </div>
</nav>

<main class="no-print">
    <section id="tab-projects" class="tab-content">
        <div class="section-header">
            <h2>Book Library</h2>
            <button onclick="createNewProject()" class="action-btn-primary">‚ûï New Book</button>
        </div>
        <div id="project-list" class="project-grid"></div>
    </section>

    <section id="tab-details" class="tab-content" style="display:none">
        <h2>Paperback Details</h2>
        <div class="grid-form">
            <div class="input-wrap"><label>Title</label><input type="text" id="m-title" oninput="update('metadata','title',this.value)"></div>
            <div class="input-wrap"><label>Author</label><input type="text" id="m-author" oninput="update('metadata','author',this.value)"></div>
        </div>
        <h3>7 Search Keywords</h3>
        <div class="keyword-grid" id="keyword-container"></div>
        <h3>Description</h3>
        <div id="editor-description" class="editor-mini" contenteditable="true" oninput="update('','descriptionHtml',this.innerHTML)"></div>
    </section>

    <section id="tab-content" class="tab-content" style="display:none">
        <div class="toolbar">
            <button onclick="cmd('bold')">B</button>
            <button onclick="cmd('italic')">I</button>
            <span class="sep">|</span>
            <label class="tool-btn">üì∑ OCR <input type="file" hidden accept="image/*" onchange="runOCR(this)"></label>
            <label class="tool-btn">üñºÔ∏è Image <input type="file" hidden accept="image/*" onchange="insertImage(this)"></label>
            <button onclick="generateTOC()">‚ö° TOC</button>
            <span id="ocr-status"></span>
        </div>
        <div class="ms-layout">
            <div class="side-nav">
                <div id="ch-list"></div>
                <button class="add-btn" onclick="addCh()">+ Chapter</button>
            </div>
            <div class="editor-body">
                <input type="text" id="ch-title" class="title-input" placeholder="Chapter Title" oninput="saveCh()">
                <div id="main-editor" class="editor" contenteditable="true" oninput="saveCh()"></div>
            </div>
        </div>
    </section>

    <section id="tab-cover" class="tab-content" style="display:none"><h2>Cover Setup Coming Soon</h2></section>
    <section id="tab-rights" class="tab-content" style="display:none">
        <h2>Rights & Pricing</h2>
        <div class="royalty-box">
            <label>List Price ($)</label>
            <input type="number" id="m-price" value="9.99" oninput="update('metadata','price',this.value)">
        </div>
    </section>

    <section id="tab-export" class="tab-content" style="display:none">
        <button onclick="window.print()">üñ®Ô∏è Print to PDF</button>
        <div id="preview-area"></div>
    </section>
</main>

<div id="print-area" class="print-only"></div>
<script src="app.js"></script>
</body>
</html>
